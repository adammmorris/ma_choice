<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <link rel="stylesheet" href="jspsych/css/jspsych.css">
  </head>
  <body>
  </body>
  <script>
    // create an empty timeline array
    var timeline = [];

    // create a multi-attribute decision trial
    // with randomly sampled data
    var trial = {
      type: 'html-button-response',
      stimulus: generateTable,
      choices: ['F', 'J'],
      prompt: 'Click <b>F</b> for <b>Home A</b> and <b>J</b> for <b>Home B</b>',
      post_trial_gap: 500
    }

    var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<span style="font-size:40px;">+</span>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 1000
  }

    // add trial to the timeline; use for-loop for n trials
    timeline.push(trial);
    timeline.push(fixation);
    timeline.push(trial);
    timeline.push(trial);

    // for pedagogical purposes, log the initialization of the experiment to the console
    console.log('jsPsych.init() about to be called. experiment will begin.')

    // run the experiment
    jsPsych.init({
      timeline: timeline
    });

	//added attributes to arrays-- other option is to create hashmap/dictionary
	var home_attributes=['Number of Bedrooms','Pool','Size of Garage','Amount of Crime in Neighborhood','Proximity to Parks','Proximity to Cafes/Restaurants','Noise Pollution','Closest School Reputation','Amount of Natural Light','Age of Building','Washer/Dryer','Size of Yard','Fireplace','Central AC','Climate','Hardwood Floors','Freshly Painted Exterior','Proximity to Neighboring Houses'];
	var yn =['Yes','No'];
	var size_of_att = ['None','Small','Medium','Large'];
	var crime = ['Very Low', 'Low', 'Moderate', 'High', 'Very High'];
	var pollution = ['Low', 'Medium', 'High'];
	var prox1 = ['5 min', '10 min', '20 min'];
	var prox2 = ['10 min', '30 min', '60 min'];
	var light = ['No Natural Light', 'A Little Natural Light', 'Moderate Natural Light', 'A lot of Natural Light'];
	var age = ['New','Old'];
	var climate = ['Hot','Moderate','Cold'];

    function generateTable(){
    	let n=5;
    	var num_of_attributes = jsPsych.randomization.sampleWithoutReplacement(home_attributes,n);
    	//for (let j=0;j<num_of_attributes.length;j++)
    	//console.log(num_of_attributes[j]);
    	var arr = [];
     	for (let j=0;j<num_of_attributes.length;j++){
		 	if(num_of_attributes[j]==='Number of Bedrooms'){
		 		arr.push(['Number of Bedrooms',Math.floor(Math.random() * 5) + 1, Math.floor(Math.random() * 5) + 1]);
		 	}
		 	
			else if(num_of_attributes[j]=='Pool'){
				arr.push(['Pool',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if(num_of_attributes[j]=='Size of Garage'){
				arr.push(['Size of Garage',size_of_att[Math.floor(Math.random() * size_of_att.length)],size_of_att[Math.floor(Math.random() * size_of_att.length)]]);
			}

			else if(num_of_attributes[j]=='Amount of Crime in Neighborhood'){
				arr.push(['Amount of Crime in Neighborhood',crime[Math.floor(Math.random() * crime.length)],crime[Math.floor(Math.random() * crime.length)]]);
			}

			else if(num_of_attributes[j]=='Proximity to Parks'){
				arr.push(['Proximity to Parks',prox1[Math.floor(Math.random() * prox1.length)],prox1[Math.floor(Math.random() * prox1.length)]]);
			}

			else if(num_of_attributes[j]=='Proximity to Cafes/Restaurants'){
				arr.push(['Proximity to Cafes/Restaurants',prox1[Math.floor(Math.random() * prox1.length)],prox1[Math.floor(Math.random() * prox1.length)]]);
			}

			else if(num_of_attributes[j]=='Noise Pollution'){
				arr.push(['Noise Pollution',pollution[Math.floor(Math.random() * pollution.length)],pollution[Math.floor(Math.random() * pollution.length)]]);
			}

			else if(num_of_attributes[j]=='Closest School Reputation'){
				arr.push(['Closest School Reputation',prox2[Math.floor(Math.random() * prox2.length)],prox2[Math.floor(Math.random() * prox2.length)]]);
			}

			else if(num_of_attributes[j]=='Amount of Natural Light'){
				arr.push(['Amount of Natural Light',light[Math.floor(Math.random() * light.length)],light[Math.floor(Math.random() * light.length)]]);
			}

			else if(num_of_attributes[j]=='Age of Building'){
				arr.push(['Age of Building',age[Math.floor(Math.random() * age.length)],age[Math.floor(Math.random() * age.length)]]);
			}

			else if(num_of_attributes[j]=='Washer/Dryer'){
				arr.push(['Washer/Dryer',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if(num_of_attributes[j]=='Size of Yard'){
				arr.push(['Size of Yard',size_of_att[Math.floor(Math.random() * size_of_att.length)],size_of_att[Math.floor(Math.random() * size_of_att.length)]]);
			}

			else if(num_of_attributes[j]=='Fireplace'){
				arr.push(['Fireplace',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if(num_of_attributes[j]=='Central AC'){
				arr.push(['Central AC',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if(num_of_attributes[j]=='Climate'){
				arr.push(['Climate',climate[Math.floor(Math.random() * climate.length)],climate[Math.floor(Math.random() * climate.length)]]);
			}

			else if(num_of_attributes[j]=='Hardwood Floors'){
				arr.push(['Hardwood Floors',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if(num_of_attributes[j]=='Freshly Painted Exterior'){
				arr.push(['Freshly Painted Exterior',yn[Math.floor(Math.random() * yn.length)],yn[Math.floor(Math.random() * yn.length)]]);
			}

			else if (num_of_attributes[j]=='Proximity to Neighboring Houses ') {
				arr.push(['Proximity to Neighboring Houses',prox1[Math.floor(Math.random() * prox1.length)],prox1[Math.floor(Math.random() * prox1.length)]]);
			}
		console.log(arr);

		//console.log(num_of_attributes);
		//console.log(arr[0][1]);
		}
		return arr;

    	
    }
  </script>
</html>